<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema Integral de Gesti√≥n Docente ¬∑ MEP</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Roboto, system-ui, sans-serif;
        }
        :root {
            --primario: #0b3b2f;
            --secundario: #a7c1b0;
            --fondo: #f4f7f5;
            --texto: #1e2b28;
            --gris-claro: #e0e7e3;
            --borde: #c0cfc5;
            --sombra: rgba(0, 40, 30, 0.08);
        }
        @media (prefers-color-scheme: dark) {
            :root {
                --primario: #1f5e4f;
                --secundario: #3d5e51;
                --fondo: #1b2a25;
                --texto: #e0ede7;
                --gris-claro: #2e4039;
                --borde: #3f5b50;
                --sombra: rgba(0,0,0,0.4);
            }
        }
        body {
            display: flex;
            min-height: 100vh;
            background: var(--fondo);
            color: var(--texto);
            transition: background 0.2s;
        }
        /* barra lateral fija */
        nav {
            width: 260px;
            background: var(--primario);
            padding: 2rem 0.5rem;
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
            box-shadow: 4px 0 12px var(--sombra);
            position: sticky;
            top: 0;
            height: 100vh;
            overflow-y: auto;
        }
        nav button {
            background: rgba(255,255,255,0.1);
            border: none;
            color: white;
            padding: 1rem 0.8rem;
            text-align: left;
            font-size: 1rem;
            font-weight: 500;
            border-radius: 10px 0 0 10px;
            cursor: pointer;
            transition: 0.2s;
            border-left: 4px solid transparent;
        }
        nav button.activo {
            background: var(--fondo);
            color: var(--primario);
            border-left: 4px solid var(--secundario);
            font-weight: 700;
            box-shadow: -4px 0 8px rgba(0,0,0,0.05);
        }
        nav button:hover {
            background: rgba(255,255,240,0.25);
        }
        main {
            flex: 1;
            padding: 2rem;
            overflow-y: auto;
            max-width: calc(100% - 260px);
        }
        .pestana {
            display: none;
            animation: fade 0.2s;
        }
        .pestana.activa {
            display: block;
        }
        @keyframes fade { from { opacity:0.3; } to { opacity:1; } }
        h2 { margin-bottom: 1.8rem; font-weight: 400; border-bottom: 2px solid var(--secundario); padding-bottom: 0.4rem; }
        .card {
            background: color-mix(in srgb, var(--fondo) 95%, black);
            border-radius: 24px;
            padding: 1.5rem;
            box-shadow: 0 6px 16px var(--sombra);
            border: 1px solid var(--borde);
            margin-bottom: 1.5rem;
        }
        .fila {
            display: flex;
            flex-wrap: wrap;
            gap: 1.5rem;
            align-items: center;
            margin-bottom: 1rem;
        }
        .campo {
            display: flex;
            flex-direction: column;
            min-width: 180px;
        }
        label { font-size: 0.9rem; opacity: 0.9; }
        input, select, textarea, button:not(.nav-btn) {
            background: var(--fondo);
            border: 1px solid var(--borde);
            border-radius: 16px;
            padding: 0.6rem 1rem;
            color: var(--texto);
            font-size: 0.95rem;
        }
        button:not(.nav-btn) {
            background: var(--primario);
            color: white;
            font-weight: 600;
            border: none;
            padding: 0.7rem 1.8rem;
            border-radius: 40px;
            cursor: pointer;
            box-shadow: 0 2px 6px var(--sombra);
            transition: 0.2s;
            min-width: 140px;
        }
        button:not(.nav-btn):hover { filter: brightness(1.1); transform: scale(1.02); }
        .boton-sec { background: var(--secundario); color: #1e2b28; }
        .tabla {
            width: 100%;
            border-collapse: collapse;
            margin: 1rem 0;
        }
        .tabla th { background: var(--secundario); color: #1e2b28; padding: 0.75rem; }
        .tabla td { border-bottom: 1px solid var(--borde); padding: 0.7rem; }
        .toolbar { display: flex; gap: 0.8rem; flex-wrap: wrap; margin: 1.5rem 0; }
        .badge { background: var(--primario); color: white; border-radius: 40px; padding: 0.2rem 1rem; }
        .porcentaje-box { display: flex; gap: 1rem; align-items: center; }
        .aviso { background: #ffd966; color: #2c1e0a; border-radius: 30px; padding: 0.5rem 1.5rem; }
        @media (max-width: 720px) {
            body { flex-direction: column; }
            nav { width: 100%; height: auto; flex-direction: row; overflow-x: auto; padding: 0.5rem; }
            nav button { border-radius: 30px; border-left: none; }
            main { max-width: 100%; }
        }
    </style>
</head>
<body>
<nav id="barra-lateral">
    <button class="nav-btn activo" data-pestana="config">1Ô∏è‚É£ CONFIGURACI√ìN</button>
    <button class="nav-btn" data-pestana="grupos">2Ô∏è‚É£ GRUPOS Y EST.</button>
    <button class="nav-btn" data-pestana="componentes">3Ô∏è‚É£ COMPONENTES</button>
    <button class="nav-btn" data-pestana="instrumentos">4Ô∏è‚É£ INSTRUMENTOS</button>
    <button class="nav-btn" data-pestana="asistencia">5Ô∏è‚É£ ASISTENCIA</button>
    <button class="nav-btn" data-pestana="bitacora">6Ô∏è‚É£ BIT√ÅCORA</button>
    <button class="nav-btn" data-pestana="reportes">7Ô∏è‚É£ REPORTES</button>
    <button class="nav-btn" data-pestana="acta">8Ô∏è‚É£ ACTA FINAL</button>
    <button class="nav-btn" data-pestana="respaldo">9Ô∏è‚É£ RESPALDO</button>
</nav>
<main id="contenido-principal">
    <!-- 1 CONFIGURACI√ìN GENERAL -->
    <div id="pestana-config" class="pestana activa">
        <h2>‚öôÔ∏è Configuraci√≥n general MEP</h2>
        <div class="card">
            <div class="fila"><div class="campo"><label>Centro educativo</label><input id="centroInput" placeholder="Liceo, escuela..."></div>
            <div class="campo"><label>Modalidad</label><select id="modalidadSelect"><option>Primaria</option><option>Secundaria</option><option>Preescolar</option></select></div>
            <div class="campo"><label>Periodo</label><select id="periodoSelect"><option>I</option><option>II</option><option>III</option></select></div></div>
            <div class="porcentaje-box">
                <div class="campo"><label>üßÆ Trabajo cotidiano %</label><input type="number" id="porcTC" value="30" min="0" max="100"></div>
                <div class="campo"><label>üìê Proyecto %</label><input type="number" id="porcProy" value="20" min="0" max="100"></div>
                <div class="campo"><label>üìù Prueba %</label><input type="number" id="porcPrueba" value="30" min="0" max="100"></div>
                <div class="campo"><label>üìö Tareas %</label><input type="number" id="porcTareas" value="20" min="0" max="100"></div>
            </div>
            <div id="sumaPorcentajes" class="badge">Suma: 100% ‚úÖ</div>
            <div class="toolbar">
                <button id="guardarConfig">üíæ Guardar configuraci√≥n</button>
                <button id="cargarConfig" class="boton-sec">üìÇ Cargar configuraci√≥n</button>
                <button id="resetSistema" class="boton-sec">‚ö†Ô∏è Restablecer sistema</button>
            </div>
        </div>
        <div class="card"><h3>Centros guardados</h3><div id="listaCentros"></div></div>
    </div>
    <!-- 2 GRUPOS Y ESTUDIANTES -->
    <div id="pestana-grupos" class="pestana">
        <h2>üë• Grupos y estudiantes</h2>
        <div class="fila"><input id="nuevoGrupo" placeholder="Ej: 7-1, 2B"><button id="agregarGrupo">+ Grupo</button></div>
        <select id="selectorGrupo"></select>
        <div class="toolbar"><button id="importarCSVEst">‚¨ÜÔ∏è Importar CSV</button><button id="exportarCSVEst">‚¨áÔ∏è Exportar CSV</button></div>
        <table class="tabla" id="tablaEstudiantes"><thead><tr><th>#</th><th>Nombre</th><th>Tel√©fono</th><th>Correo</th><th>ACS</th><th>Adec. no significativa</th><th>Observaciones</th></tr></thead><tbody></tbody></table>
        <button id="agregarEstudiante">‚ûï A√±adir estudiante manual</button>
    </div>
    <!-- 3 REGISTRO DE COMPONENTES -->
    <div id="pestana-componentes" class="pestana">
        <h2>üìä Registro de componentes y promedio</h2>
        <div class="fila"><select id="grupoComp"></select><select id="estudianteComp"></select></div>
        <div class="card"><div class="fila"><div class="campo"><label>Trabajo cotidiano</label><input id="notaTC" type="number" step="0.1"></div><div class="campo"><label>Proyecto</label><input id="notaProy" type="number" step="0.1"></div><div class="campo"><label>Prueba</label><input id="notaPrueba" type="number" step="0.1"></div><div class="campo"><label>Tareas</label><input id="notaTareas" type="number" step="0.1"></div></div>
        <div><label><input type="checkbox" id="acsCheckbox"> Estudiante con ACS (f√≥rmula alternativa editable)</label></div>
        <div class="campo"><label>F√≥rmula alternativa ACS (ej: tc*0.2+proy*0.2+prueba*0.4+tareas*0.2)</label><input id="formulaACS" value="tc*0.2+proy*0.2+prueba*0.4+tareas*0.2"></div>
        <button id="calcularPromedio">üìê Calcular promedio</button> <span id="promedioResultado">___</span>
        <button id="guardarNotasPeriodo">üíæ Guardar notas periodo</button>
        </div>
    </div>
    <!-- 4 INSTRUMENTOS (simplificado) -->
    <div id="pestana-instrumentos" class="pestana">
        <h2>üìã Instrumentos (r√∫brica / lista de cotejo)</h2>
        <div class="fila"><select id="tipoInstrumento"><option>Lista de cotejo</option><option>R√∫brica anal√≠tica</option><option>Escala de desempe√±o</option><option>Prueba estructurada</option></select><input placeholder="Nombre instrumento" id="nombreInstrumento"><button id="crearInstrumento">+ Crear plantilla</button></div>
        <div id="instrumentosGuardados"></div>
    </div>
    <!-- 5 ASISTENCIA -->
    <div id="pestana-asistencia" class="pestana">
        <h2>üìÜ Asistencia diaria</h2>
        <select id="grupoAsistencia"></select>
        <div class="toolbar"><button id="marcarPresente">P</button><button id="marcarAusente">A</button><button id="marcarJustificada">J</button><button id="marcarTardia">T</button></div>
        <table class="tabla" id="tablaAsistencia"></table>
        <button id="reporteAusentismo">üìÑ Generar reporte ausentismo PDF</button>
    </div>
    <!-- 6 BIT√ÅCORA DOCENTE -->
    <div id="pestana-bitacora" class="pestana">
        <h2>üìì Bit√°cora docente (DUA)</h2>
        <div class="fila"><input type="date" id="fechaBit"><input placeholder="Tema" id="temaBit"><input placeholder="Actividad" id="actividadBit"><input placeholder="Observaciones" id="obsBit"><input placeholder="Ajustes DUA" id="duaBit"><button id="agregarBitacora">‚ûï Agregar</button></div>
        <div id="bitacoraTabla"></div>
        <button id="exportBitacoraWord">üì• Word</button><button id="exportBitacoraPDF">üì• PDF</button>
    </div>
    <!-- 7 REPORTES POR PERIODO -->
    <div id="pestana-reportes" class="pestana">
        <h2>üìà Reportes por periodo</h2>
        <select id="periodoReporte"></select><button id="generarReporte">Generar</button>
        <div id="reporteResultado"></div>
        <div class="toolbar"><button id="exportReportePDF">PDF</button><button id="exportReporteWord">Word</button><button id="exportReporteCSV">CSV</button></div>
    </div>
    <!-- 8 ACTA FINAL -->
    <div id="pestana-acta" class="pestana">
        <h2>üìú Acta final ¬∑ consolidado anual</h2>
        <select id="grupoActa"></select><button id="consolidarActa">Consolidar</button>
        <div id="actaResultado"></div>
        <button id="exportActaPDF">PDF</button><button id="exportActaWord">Word</button>
    </div>
    <!-- 9 RESPALDO -->
    <div id="pestana-respaldo" class="pestana">
        <h2>üíæ Respaldos / exportaci√≥n global</h2>
        <button id="exportarTodoJSON">‚¨áÔ∏è Exportar todo JSON</button>
        <input type="file" id="importarJSON" accept="application/json"><button id="cargarBackup">Restaurar respaldo</button>
        <button id="exportMasivoCSV">üì§ Exportaci√≥n masiva CSV</button>
        <button id="generarCopia">üìÄ Generar copia seguridad</button>
    </div>
</main>

<script>
    (function() {
        // **********************************************
        // SIMULACI√ìN DE ALMACENAMIENTO Y ESTADO GLOBAL
        // **********************************************
        let centros = JSON.parse(localStorage.getItem('mep_centros')) || [{ nombre: 'Liceo San Jos√©', modalidad: 'Secundaria' }];
        let configuraciones = JSON.parse(localStorage.getItem('mep_config')) || { porcTC:30, porcProy:20, porcPrueba:30, porcTareas:20, periodo:'I' };
        let estudiantes = JSON.parse(localStorage.getItem('mep_estudiantes')) || [];
        let grupos = JSON.parse(localStorage.getItem('mep_grupos')) || ['7-1'];
        let notasPeriodo = JSON.parse(localStorage.getItem('mep_notas')) || [];
        let asistencia = JSON.parse(localStorage.getItem('mep_asistencia')) || [];
        let bitacora = JSON.parse(localStorage.getItem('mep_bitacora')) || [];
        let instrumentos = JSON.parse(localStorage.getItem('mep_instrumentos')) || [];

        // ---------- Helper render ----------
        function guardarTodo() {
            localStorage.setItem('mep_centros', JSON.stringify(centros));
            localStorage.setItem('mep_config', JSON.stringify(configuraciones));
            localStorage.setItem('mep_estudiantes', JSON.stringify(estudiantes));
            localStorage.setItem('mep_grupos', JSON.stringify(grupos));
            localStorage.setItem('mep_notas', JSON.stringify(notasPeriodo));
            localStorage.setItem('mep_asistencia', JSON.stringify(asistencia));
            localStorage.setItem('mep_bitacora', JSON.stringify(bitacora));
            localStorage.setItem('mep_instrumentos', JSON.stringify(instrumentos));
        }

        // navegacion pesta√±as
        document.querySelectorAll('.nav-btn').forEach(btn => {
            btn.addEventListener('click', e => {
                document.querySelectorAll('.nav-btn').forEach(b => b.classList.remove('activo'));
                btn.classList.add('activo');
                document.querySelectorAll('.pestana').forEach(p => p.classList.remove('activa'));
                document.getElementById('pestana-'+btn.dataset.pestana).classList.add('activa');
            });
        });

        // 1Ô∏è‚É£ CONFIGURACI√ìN
        function actualizarSuma() {
            let tc = +document.getElementById('porcTC').value || 0;
            let py = +document.getElementById('porcProy').value || 0;
            let pb = +document.getElementById('porcPrueba').value || 0;
            let ta = +document.getElementById('porcTareas').value || 0;
            let suma = tc+py+pb+ta;
            document.getElementById('sumaPorcentajes').innerText = suma===100? 'Suma: 100% ‚úÖ' : `Suma: ${suma}% ‚ùå debe ser 100`;
            return suma===100;
        }
        document.querySelectorAll('#porcTC,#porcProy,#porcPrueba,#porcTareas').forEach(i => i.addEventListener('input', actualizarSuma));
        document.getElementById('guardarConfig').addEventListener('click', ()=>{
            if(!actualizarSuma()) return alert('Los porcentajes deben sumar 100');
            configuraciones = {
                centro: document.getElementById('centroInput').value,
                modalidad: document.getElementById('modalidadSelect').value,
                periodo: document.getElementById('periodoSelect').value,
                porcTC: +document.getElementById('porcTC').value,
                porcProy: +document.getElementById('porcProy').value,
                porcPrueba: +document.getElementById('porcPrueba').value,
                porcTareas: +document.getElementById('porcTareas').value,
            };
            centros.push({ nombre: configuraciones.centro, modalidad: configuraciones.modalidad });
            guardarTodo(); renderListaCentros(); alert('Configuraci√≥n guardada');
        });
        function renderListaCentros() {
            document.getElementById('listaCentros').innerHTML = centros.map(c=>`<div>üè´ ${c.nombre} (${c.modalidad})</div>`).join('');
        }
        document.getElementById('cargarConfig').addEventListener('click', ()=>{
            if(centros.length) {
                let ult = centros[centros.length-1];
                document.getElementById('centroInput').value = ult.nombre;
                document.getElementById('modalidadSelect').value = ult.modalidad;
                document.getElementById('periodoSelect').value = configuraciones.periodo || 'I';
                document.getElementById('porcTC').value = configuraciones.porcTC || 30;
                document.getElementById('porcProy').value = configuraciones.porcProy || 20;
                document.getElementById('porcPrueba').value = configuraciones.porcPrueba || 30;
                document.getElementById('porcTareas').value = configuraciones.porcTareas || 20;
                actualizarSuma();
            }
        });
        document.getElementById('resetSistema').addEventListener('click', ()=>{
            if(confirm('Restablecer todo el sistema? ')) { localStorage.clear(); location.reload(); }
        });

        // 2Ô∏è‚É£ GRUPOS Y ESTUDIANTES
        function renderGruposSelect() {
            let sel = document.getElementById('selectorGrupo'); if(!sel) return;
            sel.innerHTML = grupos.map(g=>`<option>${g}</option>`).join('');
            document.querySelectorAll('#grupoComp, #grupoAsistencia, #grupoActa').forEach(s=>{ if(s) s.innerHTML = grupos.map(g=>`<option>${g}</option>`).join(''); });
        }
        function renderTablaEstudiantes() {
            let grupo = document.getElementById('selectorGrupo')?.value || grupos[0];
            let filtro = estudiantes.filter(e=>e.grupo===grupo);
            let tbody = document.querySelector('#tablaEstudiantes tbody');
            tbody.innerHTML = filtro.map((e,i)=>`<tr>
                <td>${e.numLista||i+1}</td>
                <td contenteditable="true" data-id="${e.id}" data-field="nombre">${e.nombre}</td>
                <td contenteditable="true" data-id="${e.id}" data-field="tel">${e.tel||''}</td>
                <td contenteditable="true" data-id="${e.id}" data-field="correo">${e.correo||''}</td>
                <td><input type="checkbox" ${e.acs?'checked':''} data-id="${e.id}" class="acsCheck"></td>
                <td><input type="checkbox" ${e.adecuacion?'checked':''} data-id="${e.id}" class="adecCheck"></td>
                <td contenteditable="true" data-id="${e.id}" data-field="obs">${e.obs||''}</td></tr>`).join('');
        }
        document.getElementById('agregarGrupo')?.addEventListener('click', ()=>{
            let g = document.getElementById('nuevoGrupo').value.trim(); if(g&&!grupos.includes(g)) { grupos.push(g); renderGruposSelect(); guardarTodo(); }
        });
        document.getElementById('agregarEstudiante')?.addEventListener('click', ()=>{
            let grupo = document.getElementById('selectorGrupo')?.value;
            if(!grupo) return;
            estudiantes.push({ id: Date.now()+Math.random(), grupo, nombre:'Nuevo', numLista: estudiantes.filter(e=>e.grupo===grupo).length+1, tel:'', correo:'', acs:false, adecuacion:false, obs:'' });
            guardarTodo(); renderTablaEstudiantes();
        });
        document.querySelector('#tablaEstudiantes tbody')?.addEventListener('input', e=>{
            if(e.target.dataset.id) {
                let estudiante = estudiantes.find(est=>est.id==e.target.dataset.id);
                if(estudiante) estudiante[e.target.dataset.field] = e.target.innerText;
                guardarTodo();
            }
        });
        document.querySelector('#tablaEstudiantes tbody')?.addEventListener('change', e=>{
            if(e.target.classList.contains('acsCheck')||e.target.classList.contains('adecCheck')) {
                let id = e.target.dataset.id;
                let est = estudiantes.find(e=>e.id==id);
                if(est) { if(e.target.classList.contains('acsCheck')) est.acs = e.target.checked;
                    else est.adecuacion = e.target.checked; }
                guardarTodo();
            }
        });

        // 3Ô∏è‚É£ COMPONENTES (motor de c√°lculo)
        document.getElementById('calcularPromedio')?.addEventListener('click', ()=>{
            let tc = +document.getElementById('notaTC').value, proy = +document.getElementById('notaProy').value, pr = +document.getElementById('notaPrueba').value, ta = +document.getElementById('notaTareas').value;
            if(isNaN(tc)||isNaN(proy)||isNaN(pr)||isNaN(ta)) return alert('Faltan notas');
            let config = configuraciones;
            let prom = (tc*config.porcTC + proy*config.porcProy + pr*config.porcPrueba + ta*config.porcTareas)/100;
            if(document.getElementById('acsCheckbox').checked) {
                let formula = document.getElementById('formulaACS').value;
                try { prom = eval(formula.replace(/tc/g,tc).replace(/proy/g,proy).replace(/prueba/g,pr).replace(/tareas/g,ta)); } catch{ alert('Error f√≥rmula'); return; }
            }
            document.getElementById('promedioResultado').innerText = prom.toFixed(2);
        });

        // 4 INSTRUMENTOS placeholder
        document.getElementById('crearInstrumento')?.addEventListener('click', ()=>{
            let tipo = document.getElementById('tipoInstrumento').value;
            let nom = document.getElementById('nombreInstrumento').value;
            if(nom) { instrumentos.push({ tipo, nom, id: Date.now() }); guardarTodo(); document.getElementById('instrumentosGuardados').innerHTML += `<div>üìå ${nom} (${tipo})</div>`; }
        });

        // 5 ASISTENCIA esqueleto (tabla simulada)
        function renderAsistencia(){}
        document.getElementById('marcarPresente')?.addEventListener('click', ()=>alert('Asistencia marcada (simulado)'));

        // 6 BIT√ÅCORA
        function renderBitacora(){
            let html = '<table class="tabla"><tr><th>Fecha</th><th>Tema</th><th>Actividad</th><th>Observaciones</th><th>Ajustes DUA</th></tr>';
            bitacora.forEach(b=> html+=`<tr><td>${b.fecha}</td><td>${b.tema}</td><td>${b.actividad}</td><td>${b.obs}</td><td>${b.dua}</td></tr>`);
            html+='</table>'; document.getElementById('bitacoraTabla').innerHTML = html;
        }
        document.getElementById('agregarBitacora')?.addEventListener('click', ()=>{
            let b = { fecha:document.getElementById('fechaBit').value, tema:document.getElementById('temaBit').value, actividad:document.getElementById('actividadBit').value, obs:document.getElementById('obsBit').value, dua:document.getElementById('duaBit').value };
            if(b.fecha && b.tema) { bitacora.push(b); guardarTodo(); renderBitacora(); }
        });

        // 7 REPORTES (gen√©rico)
        document.getElementById('generarReporte')?.addEventListener('click', ()=>{
            document.getElementById('reporteResultado').innerHTML = '<p>Reporte simulado: promedio general 82</p>';
        });

        // 8 ACTA FINAL simulado
        document.getElementById('consolidarActa')?.addEventListener('click', ()=>{
            document.getElementById('actaResultado').innerHTML = '<p>Nota anual: 84 ¬∑ Aprobado</p>';
        });

        // 9 RESPALDO
        document.getElementById('exportarTodoJSON')?.addEventListener('click', ()=>{
            let dataStr = JSON.stringify({centros,configuraciones,estudiantes,grupos,notasPeriodo,asistencia,bitacora,instrumentos});
            let blob = new Blob([dataStr], {type: 'application/json'});
            let a = document.createElement('a'); a.href = URL.createObjectURL(blob); a.download = 'respaldo_mep.json'; a.click();
        });
        document.getElementById('cargarBackup')?.addEventListener('click', ()=>{
            let file = document.getElementById('importarJSON').files[0];
            if(file) { let reader = new FileReader(); reader.onload = e=>{ let d=JSON.parse(e.target.result); Object.assign(window,d); guardarTodo(); alert('Restaurado'); }; reader.readAsText(file); }
        });

        // Pruebas internas autom√°ticas
        function pruebaInterna() {
            console.log('üß™ Prueba interna MEP:');
            if(centros.length) console.log('‚úÖ centro existente');
            grupos.push('grupo-prueba');
            estudiantes.push({id:'p1',grupo:'grupo-prueba',nombre:'Estudiante prueba', acs:false});
            console.log('‚úÖ grupo/estudiante');
            let tc=80,proy=90,prueba=85,tareas=95, cfg = configuraciones;
            let prom = (tc*cfg.porcTC + proy*cfg.porcProy + prueba*cfg.porcPrueba + tareas*cfg.porcTareas)/100;
            console.log('‚úÖ c√°lculo promedio:', prom);
            guardarTodo();
        }
        pruebaInterna();

        // Iniciales
        actualizarSuma(); renderListaCentros(); renderGruposSelect(); renderTablaEstudiantes(); renderBitacora();
        // Exportaciones ficticias de PDF/Word usan jsPDF (simulado con alert)
        document.querySelectorAll('button[id*="PDF"],[id*="Word"],[id*="CSV"],[id*="export"]').forEach(b=> b.addEventListener('click', (e)=> alert('Exportaci√≥n simulada: ' + e.target.innerText)));

        // Observador para edici√≥n estudiantes
        document.getElementById('selectorGrupo')?.addEventListener('change', renderTablaEstudiantes);
    })();
</script>
<!-- jsPDF simulado para evitar dependencia externa (no se usa realmente) -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<script>
    // sobreescribir para evitar errores (simulaci√≥n)
    window.jspdf = window.jspdf || {jsPDF: class { constructor(){} text(){} save(){} }};
</script>
</body>
</html>
